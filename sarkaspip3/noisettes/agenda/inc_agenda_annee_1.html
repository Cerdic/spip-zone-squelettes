[(#REM) <!-- Noisette d'affichage de l'agenda natif en format listing annuel
	- id_rubrique: la racine specialisee choisie pour agenda
	- annee: l'annee choisie pour etre affichee
	- mois: mois choisi
	- categorie: filtre a appliquer aux evenements
 --> ]
[(#REM) <!-- Definition du contexte de l'agenda --> ]
[(#ENV{id_rubrique}|agenda_definir_contexte{
						'listing_annuel',
						[(#CONFIG{sarkaspip_agenda/mois1, 1})],
						[(#CONFIG{sarkaspip_agenda/format_pagination, annee})]}
)]

[(#REM) <!-- Recensement des evenements --> ]
#SET{annee_choisie, #ENV{annee, #AUJOURDHUI|annee}}
[(#CONFIG{sarkaspip_agenda/mois1, 1}|=={1}|?{' '})
#SET{annee_choisie, #ENV{annee, #AUJOURDHUI|annee}}
]
<BOUCLE_agenda(ARTICLES)
	{id_secteur=#ENV{id_rubrique}}
	{par date_redac}>
	[(#ENV{id_rubrique}|agenda_recenser_evenement{
						[(#ID_ARTICLE)], 
						[(#DATE_REDAC)], 
						[(#TITRE|supprimer_numero)]}
	)]
</BOUCLE_agenda>

[(#REM) <!-- Listing annuel des evenements --> ]
<h1 class="intitule_page">
	<:sarkaspip:agenda:>&nbsp;-&nbsp;
	<BOUCLE_titre_categorie(MOTS) {id_mot=(#ENV{categorie,-1})}>
		[<:sarkaspip:info_categorie:>&nbsp;:&nbsp;(#TITRE)]
	</BOUCLE_titre_categorie>
	</B_titre_categorie>
		[(#ENV{categorie,-1}|=={-1}|?{<:sarkaspip:info_evt_sans_filtre:>,[(#ENV{categorie,-1}|=={0}|?{<:sarkaspip:info_evt_sans_categorie:>})]})]
	<//B_titre_categorie>
</h1>

<div id="agenda_annuel" class="plan">
	<div class="pagination">
		[(#ENV{id_rubrique}|agenda_liste_paginer{
						[(#ENV{annee})],
						[(#ENV{mois})],
						[(#ENV{categorie,-1})],
						[(#CONFIG{sarkaspip_agenda/separateur_pagination, &nbsp;|&nbsp;})],
						[(#CONFIG{sarkaspip_agenda/ancre_pagination, evenement})],
						'normal'}
		)]
	</div>

	[(#ENV{id_rubrique}|agenda_liste_afficher{
						[(#ENV{annee})],
						[(#ENV{mois})],
						[(#ENV{categorie,-1})],
						[(#CONFIG{sarkaspip_agenda/sens_tri, normal})]}
	)]

	[<p class="erreur">
		(#ENV{id_rubrique}|agenda_liste_avertir{
						[(#ENV{annee})],
						[(#ENV{mois})]})
	</p>]
</div>
