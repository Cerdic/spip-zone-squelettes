/**
 * Contrôle du rythme vertical
 *
 * Définition des tailles de police, des interlignes et des marges inférieures pour obtenir un rythme vertical harmonieux.
 * Basé sur Shevy : https://kyleshevlin.github.io/shevy/
 *
 * @notes
 * - Il faut définir le rythme vertical APRÈS Tinytypo.
 * - Pour chaque variante $shevy-[truc], il vaut mieux redéclarer toutes les variables,
 * sinon ça prend celles pas défaut (pas celles qu'on a mis nous dans le $shevy de base)
 * - Les variantes $shevy-[truc] ne sont pas que pour le responsive, elles peuvent être utilisées pour n'importe quel sélecteur (blocs de mises en avant, etc.).
 * - Pour définir des marges dans d'autres composants du projet, utiliser la mixin bs()
**/

/* Presets des tailles des titres (pour aider, pas obligatoire) */
$MINOR_SECOND:     (1.382,     1.295,   1.214, 1.138, 1.067, 1);
$MAJOR_SECOND:     (1.802,     1.602,   1.424, 1.266, 1.125, 1);
$MINOR_THIRD:      (2.488,     2.074,   1.728, 1.44,  1.2,   1);
$BASIC_SHEVY:      (2.5,       2.1,     1.8,   1.5,   1.25,  1);
$MAJOR_THIRD:      (3.052,     2.441,   1.953, 1.563, 1.25,  1);
$PERFECT_FOURTH:   (4.209,     3.157,   2.369, 1.777, 1.333, 1);
$AUGMENTED_FOURTH: (5.653,     3.998,   2.827, 1.999, 1.414, 1);
$PERFECT_FIFTH:    (7.594,     5.063,   3.375, 2.25,  1.5,   1);
$MINOR_SIXTH:      (10.486,    6.554,   4.096, 2.56,  1.6,   1);
$GOLDEN_SECTION:   (11.089,    6.854,   4.236, 2.618, 1.618, 1);

/**
 * Base
**/

$shevy: (
  base-font-size: $typo-font-size, // Taille de police, defaut : 14px
  base-line-height: $typo-line-height, // Interlignage, defaut : 1.5
  base-font-scale: $BASIC_SHEVY, // Facteurs des tailles des titres, du h1 au h6, defaut : (2.5, 2.1, 1.8, 1.5, 1.25, 1)
  margin-bottom: true, // Ajouter des marges inférieures aux titres, defaut : true
  proximity: false, // Ressérer le contenu (proximity effect), defaut : false
  proximity-factor: .85 // Facteur pour ressérer le contenu, defaut : .85
);
@include body; // body (font-size, line-height)
@include headings; // hn (font-size, line-height, margin-bottom)
@include content; // p ol ul pre (font-size, line-height, margin-bottom)


/**
 * Variantes pour le responsive
 * On les met dans une map pour automatiser et pouvoir les lister ailleurs
**/

$shevy-states: (
  desktop-up: (
    base-font-size: $typo-font-size * 1.2, // ~ 19px
    base-line-height: $typo-line-height,
    base-font-scale: $MAJOR_THIRD,
    margin-bottom: true,
    proximity: false,
    proximity-factor: .85
  )
);
@each $state, $shevy-state in $shevy-states {
  @include gridle_state( $state ) {
    @include headings($shevy-state);
    @include body($shevy-state);
    @include content($shevy-state);
  }
}


/**
 * Variantes diverses pour des composants (blocs de mises en avant, etc.)
 * Utilisation : @extend .size-[variante]
**/

// Tailles génériques
$shevy-variants: (
  small: (
    base-font-size: $typo-font-size * 0.9,
    base-line-height: $typo-line-height,
    base-font-scale: $BASIC_SHEVY
  ),
  medium: (
    base-font-size: $typo-font-size * 1.25,
    base-line-height: $typo-line-height,
    base-font-scale: $BASIC_SHEVY
  ),
  large: (
    base-font-size: $typo-font-size * 1.5,
    base-line-height: $typo-line-height,
    base-font-scale: $BASIC_SHEVY
  ),
  huge: (
    base-font-size: $typo-font-size * 2,
    base-line-height: $typo-line-height,
    base-font-scale: $BASIC_SHEVY
  ),
);
@each $variant, $shevy-variant in $shevy-variants {
  .size-#{$variant} {
    @include headings($shevy-variant);
    @include content($shevy-variant);
  }
}