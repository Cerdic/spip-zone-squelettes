[(#REM)
<!-- 
	Noisette d'affichage des n derniers album publies
	Recoit en argument :
		- lang: pas encore utilise
 -->
]
#SET{close,''}
<B_album>
	<div id="albums_recents" class="album albums_recents">
		<h2><:sarkaspip:albums_recents:></h2>
			<ul class="thumbnails">
			<BOUCLE_album(ARTICLES){id_secteur=#RACINE_SPECIALISEE{galerie}}{par date}{inverse}{0,#CONFIG{sarkaspip_sommaire/max_albums_recents, 5}}>
			<li class="item">
				<div class="thumbnail">
					#SET{img,''}
					<BOUCLE_fi(DOCUMENTS){id_article}{media=image}{0,1}>#SET{img,#FICHIER}</BOUCLE_fi>
					<a href="#URL_ARTICLE">
					[(#LOGO_ARTICLE|sinon{#GET{img}}
					|image_passe_partout{150,150}
					|image_recadre{150,150,center,transparent}
					|image_aplatir{jpg,#ffffff}
					|sinon{#CHEMIN{css/img/placeholder.png}|balise_img|inserer_attribut{width,150}|inserer_attribut{height,150}}
					|inserer_attribut{class,spip_logos}
					|inserer_attribut{alt,[(#TITRE|attribut_html|couper{60})]}
					)]
					<strong class="caption">#TITRE</strong>
					</a>
					<div class="caption">
						[(#INTRODUCTION{150})]
					</div>
				</div>
			</li>
		</BOUCLE_album>
		</ul>
	</div>
</B_album>
<script type="text/javascript">/*<![CDATA[*/
var colEqualize = function(selector){
	var currentTallest = 0,
	     currentRowStart = 0,
	     rowDivs = new Array(),
	     $el,
	     topPosition = 0;

	jQuery(selector).each(function() {

	 $el = $(this);
	 topPostion = $el.position().top;

	 if (currentRowStart != topPostion) {
	   // we just came to a new row.  Set all the heights on the completed row
	   for (currentDiv = 0 ; currentDiv < rowDivs.length ; currentDiv++) {
	     rowDivs[currentDiv].height(currentTallest);
	   }

	   // set the variables for the new row
	   rowDivs.length = 0; // empty the array
	   currentRowStart = topPostion;
	   currentTallest = $el.height();
	   rowDivs.push($el);

	 } else {
	   // another div on the current row.  Add it to the list and check if it's taller
	   rowDivs.push($el);
	   currentTallest = (currentTallest < $el.height()) ? ($el.height()) : (currentTallest);
	}

	 // do the last row
	 for (currentDiv = 0 ; currentDiv < rowDivs.length ; currentDiv++) {
	   rowDivs[currentDiv].height(currentTallest);
	 }

	});
}
var activeColEqualization = function(selector){
	var t = null;
	jQuery(selector).height('auto');
	t = setTimeout(function(){colEqualize(selector)},250);
	jQuery(window).resize(function(){
		if (t) clearTimeout(t);
		t = setTimeout(function(){colEqualize(selector)},500);
	});
}
jQuery(function(){
	activeColEqualization('#albums_recents .thumbnails .thumbnail');
});
/*]]>*/</script>