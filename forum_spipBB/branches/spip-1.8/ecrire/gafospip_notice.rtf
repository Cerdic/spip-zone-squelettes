{\rtf1\ansi\ansicpg1252\deff0{\fonttbl{\f0\fnil\fcharset0 Century Gothic;}{\f1\fnil\fcharset0 Courier;}}
\viewkind4\uc1\pard\lang1036\b\f0\fs32 GAFoSPIP\par
\fs22 Notice Temporaire.\par
\b0 version 0.1 pour spip 1.8.1 au 2/09/2005\par
\par
GAFoSPIP est un module "backoffice" pour SPIP. Il est destin\'e9 \'e0 la gestion de Forums construit selon le mod\'e8le de SPIP Forum. Donc se basant sur une hi\'e9rarchie identique :\par
Une Rubrique-Secteur contenant des Rubriques (Salons) pr\'e9sentant des Articles (Forums)  proposants divers sujets/threads post\'e9s par les admins, r\'e9dacteurs ou visiteurs.\par
\par
\par
\b\fs28 Contenu de l'archive\par
\b0\fs22 gaf_admin.php\tab\tab (Fichier principal du module).\par
gaf_formpost.php\tab\tab (popup de r\'e9daction).\par
gaf_inc.php\tab\tab\tab (ensemble de fonctions).\par
\par
gaf_modif_inc_pres.txt\tab (modif \'e0 apporter \'e0 ecrire/inc_presentation.php(3)).\par
\par
+ 18 fichiers [.gif] : diverses ic\'f4nes.\par
\par
\par
\b\fs28 INSTALLATION\par
\b0\fs22 Gafospip s'adapte \'e0 une installation des Forums "SPIP-Forums". Assurez vous d'avoir suivis les indications fournis par les auteurs de ce dernier. Entre autre chose vous devez avoir enregistr\'e9 les deux mots-clefs suivant : "annonce" et "ferm\'e9".\par
\par
A ces deux mots, nous allons ajouter le mot : rub_gaforum. Placez le dans le groupe que vous souhaitez ; un groupe-mot technique ou au pire avec 'annonce ou 'ferm\'e9', mais ce ne serait pas trop logique.\par
Attribu\'e9 ce mot \'e0 la rubrique-secteur que vous avez cr\'e9er et d\'e9di\'e9 exclusivement \'e0 vos forums.\par
\par
Placez les 3 fichiers\tab gaf_admin.php, gaf_formpost.php, gaf_inc.php dans ecrire/.\par
\par
Placez les 18 ic\'f4nes dans ecrire/img_pack/ ou tout dossier d\'e9sign\'e9 par la Globale "_DIR_IMG_PACk".\par
\par
Modifiez, si vous le souhaitez, ecrire/inc_presentation.php afin d'obtenir l'ic\'f4ne de GAFoSPIP dans la barre d'outils de SPIP.\par
Recherchez le test suivant (ligne 2174 de l'original de spip 1.8.1) et ajoutez  la ligne comprise entre les commentaires (texte en gras dans l'exemple suivant) :\par
\par
\pard\fi20\li760\f1\fs20 if ($connect_statut == "0minirezo" AND $connect_toutes_rubriques) \{\par
\tab if ($rubrique == "redacteurs") \{\par
\tab\tab $class = "visible_au_chargement";\par
\tab\} else \{\par
\tab\tab $class = "invisible_au_chargement";\par
\tab\}\par
\par
\tab echo "<div class='$class' id='bandeauredacteurs' style='position: absolute; $spip_lang_left: ".$decal."px;'><div class='bandeau_sec'><table class='gauche'><tr>\\n";\par
\tab if (lire_meta('forum_prive_admin') == 'oui') icone_bandeau_secondaire (_T('icone_forum_administrateur'), "forum_admin.php3", "forum-admin-24.gif", "privadm", $sous_rubrique);\par
\par
\tab icone_bandeau_secondaire (_T('icone_suivi_forums'), "controle_forum.php3", "suivi-forum-24.gif", "forum-controle", $sous_rubrique);\par
\tab icone_bandeau_secondaire (_T('icone_suivi_pettions'), "controle_petition.php3", "suivi-petition-24.gif", "suivi-petition", $sous_rubrique);\par
\b // ajout gafospip\par
icone_bandeau_secondaire("GAFoSPIP/Gestion des Forums", "gaf_admin.php", "gaf_ico-24.gif", "gestion-forum", $sous_rubrique);\par
// fin ajout gafospip\par
\b0\tab echo "</tr></table></div></div>";\par
\}\par
\pard\f0\fs22\par
Ceci fera appara\'eetre l'ic\'f4ne de GAFoSPIP dans la barre secondaire de l'ic\'f4ne FORUM.\par
\par
Maintenant pointez simplement vers la page ecrire/gaf_admin.php.\par
Gafospip se d\'e9brouille tout seul !\par
\par
\par
\par
\b\fs28 L'INTERFACE\par
\b0\fs22\par
L'affichage sera conditionn\'e9 \'e0 votre r\'f4le dans le site : Administrateur principal ou Admin-restreint.\par
\par
\par
\b\fs26 Premi\'e8re page, un coup d'oeil global ...\par
\fs24\par
Colonne de gauche ...\par
\b0\fs22 La hi\'e9rarchie, affich\'e9e \'e0 gauche sous : "SECTEURS-FORUMS".\par
Oui, vous avez bien lu c'est au pluriel. On pourrait imagin\'e9 d'avoir plusieur rubrique-secteurs destin\'e9es \'e0 des Forums. Pour cela il suffit d'attribuer \'e0 chaque Secteur le mot-clef "rub_gaforum".\par
\par
\b Bloc des "Post(s) \'e0 valider".\par
\b0 Si des posts (forum "a posteriori" ...) sont en attente de validation, ils s'affichent l\'e0 ! Le titre du post (couper) renvois vers la page de thread qui le contient. On en reparle apr\'e8s.\par
\par
\b Bloc d'alerte "Forum(article) ferm\'e9".\par
\b0 Si un Admin ferme pour maintenance (d\'e9placement de Threads), un avis est affich\'e9 avec le nom de l'admin et l'heure de fermeture ...\par
\par
\b Bloc "Effacer Posts".\par
\b0 Atteindre la page destin\'e9e \'e0 effacer difinitivement de la BDD les posts en "off".\par
R\'e9serv\'e9e au Admins.\par
\par
\par
\b\fs24 Colonne de droite ...\par
\b0\fs22 S'afficheront ici, les diff\'e9rents niveaux. Salons, Forums, Sujets ...\par
La premi\'e8re page affiche le Titre du Secteur et son descriptif. Suivi des Salons (sous-rubriques).\par
Cliquez sur l'ic\'f4ne du Salon pour l'ouvrir ... !\par
\par
\par
\b\fs26 Page Salon ...\par
\b0\fs22\par
Comme la pr\'e9c\'e9dente, on trouve le Titre et le descriptif du Salon. Sous son ic\'f4ne : le num\'e9ro (id) de rubrique SPIP. A droite le bouton de cr\'e9ation de Forum (Soit en termes SPIP : un article). Le bouton pour le moment renvois vers l'interface de cr\'e9ation d'Article de SPIP.\par
\par
En dessous sont \'e9num\'e9r\'e9 les Forums (articles) de ce Salon. Leur ic\'f4ne permet de les ouvrir. On y trouve le Ttitre et Descriptif, l'id. Le nombre de Sujets et le total de Posts contenus. enfin, \'e0 droite de la ligne de Forum, un lien direct vers le dernier Post entr\'e9, pr\'e9sent\'e9 par la date et heure.\par
\par
Si le cas se pr\'e9sente, l'ic\'f4ne de fermeture du Forum, s'affichera devant le Titre de celui-ci.\par
\par
Cliquez sur l'ic\'f4ne de Forum pour l'ouvrir ... !\par
\par
\par
\b\fs26 Page Forum ...\par
\b0\fs22\par
On retrouve en gros-titre le Titre du Forum, son Descriptif et son id.\par
A gauche du titre, si c'est le cas s'affiche l'ic\'f4ne d'avis de Fermeture.\par
A droite du Titre se pr\'e9sente l'ic\'f4ne r\'e9daction de Sujet. Ainsi que la ou les ic\'f4nes de Fermeture/ouverture du Salon, selon votre niveau d'autorit\'e9 (admin / admins restreints).\par
\par
Puis, l'\'e9num\'e9ration des Sujets compris dans ce Forum.\par
Chaque ligne de Sujet montre :\par
L'ic\'f4ne d'ouverture de sujet, Titre, auteur et date. Id. Le nombre de r\'e9ponse re\'e7u. Puis un lien vers le dernier post du thread, pr\'e9sent\'e9 par le nom de l'auteur et la Date(relative).\par
En dessous, s'\'e9tale l'ensemble des r\'e9ponses : titre et date. Le Titre est un lien direct vers le post cibl\'e9 (et sur la bonne page !).\par
\par
Si le Forum a \'e9t\'e9 ferm\'e9 pour maintenance et si vous etes celui qui l'a ferm\'e9, affichage du bouton de d\'e9placement, sous son ic\'f4ne et id.\par
\par
Cliquez sur l'ic\'f4ne du Sujet pour l'ouvrir ... ! (ou sur l'un des titres de posts ...)\par
\par
\par
\b\fs26 Page Sujet ... le thread en d\'e9tail ...\par
\b0\fs22\par
\par
En t\'eate et en pied du tableau l'ic\'f4ne de R\'e9daction de Post.\par
Cette page pr\'e9sente le thread en d\'e9tail : Titre, auteur, texte ...\par
\par
\b D\'e9tails d'une ligne de post :\par
\b0 Premi\'e8re chose de remarquable, la couleur de fond de chaque post. Le Sujet (soit : le pied de Thread) est dans la couleur claire de l'interface.\par
Ce fond pourra prendre d'autre couleur que les deux nuances de gris, paire/impaire.\par
Il passe en un "rouge" pour les posts en statut : "off"(rejet\'e9). Et en "vert" pour ce en "prop" (\'e0 valider, sur forum \'e0 posteriori).\par
\par
L'image de #logo_auteur (en r\'e9duction) devant le titre et le nom (ne g\'e8re pas les avatars dans cette version).\par
A droite du titre, si le cas se pr\'e9sente, s'affichera une icone signalant, en plus de la couleur de fond du Post, le statut de ce Post (juste pour rajouter un couche !).\par
L'ic\'f4ne "enveloppe" apparaitra devant le nom si l'auteur de ce post \'e0 laisser une adresse mail.\par
A droite, on trouve la date(relative) du post et l'IP de l'exp\'e9diteur.\par
\par
Le Sujet, pr\'e9sente sous l'id, l'ic\'f4ne "Annonce", ce lien permet d'enregistr\'e9 celui-ci comme tel. (enregistrement imm\'e9diat).\par
\par
Enfin, vous reconnaitrez le(s) bouton(s) standard(s) de SPIP pour rejeter, valider un Post. Son usage est le m\'eame que les pages Spipiennes de gestion de Forums.\par
\par
\par
\par
\b\fs28  FONCTIONS\b0\fs22\par
\par
\b\fs24 Effacer Posts\par
\b0\fs22 Cette page affiche les Posts ayant un statut \'e0 "off".\par
On peut alors s\'e9lectionner ceux que l'on souhaite extraire d\'e9finitivement de la BDD.\par
-- rappel --\par
Les Posts sont mis en statut "off" par le bouton de SPIP "suppirmer ce message" au pied de chaque Post (page Sujet).\par
\par
\b Fermer\b0\par
Cette fonction \'e0 deux modes. Ferme et Maintenance.\par
\par
1 - Ferme - Permet d'invalider l'acc\'e8s \'e0 la r\'e9daction de Post et de Sujet sur un Forum (article), c\'f4t\'e9 public. Pas dans gafospip, ce qui permet aux admins de placer par exemple, \'e0 post\'e9riori de la fermeture, une "Annonce" pour justifier cele-ci  ... Ou de d\'e9dier un Forum \'e0 de l'info, Faq ... que sais-je !\par
Ce mode affecte le mot-clef : ferm\'e9 \'e0 l'article d\'e9sign\'e9.\par
Il est repr\'e9sent\'e9 par l'ic\'f4ne de verrou bleue.\par
On annule la fermeture dans la page Forum par l'ic\'f4ne d'ouverture bleue.\par
Ce mode est accessible \'e0 tous les Admins.\par
\par
\par
2 - maintenance - Ce mode va non seulement interdire l'enregistrement de Post/sujet c\'f4t\'e9 public mais \'e9galement emp\'eacher dans GAFoSPIP, pour tous les Admins, de d\'e9poser des Posts, Sujets accepter, m\'eame pour celui qui pose le verrou.\par
La pose du verrou "maintenance" est destin\'e9 \'e0 permettre le d\'e9placement de thread entier, d'un article \'e0 un autre. Ce d\'e9placement ne peut se faire que 10 mn apr\'e8s la pose du verrou, (c'est peut-\'eatre un peu long ! ) et uniquement par celui qui l'a pos\'e9 !\par
Un message apparait dans la colonne de gauche pour signaler la chose \'e0 l'ensemble des utilisateurs de GAFoSPIP. Il affiche le nom et l'heure \'e0 laquelle a \'e9t\'e9 plac\'e9 le verrou.\par
La r\'e9ouverture se fait par l'ic\'f4ne bleue correspondante.\par
Ce mode affecte, si ce n'est d\'e9j\'e0 fait, le mot-clef "ferm\'e9" \'e0 l'article d\'e9sign\'e9 et pose un fichier [.lck].\par
Ce mode  se met en place par l'ic\'f4ne de verrou rouge\par
Il n'est accessible qu'au seuls Admins principaux.\par
La r\'e9ouverture se fait avec l'ic\'f4ne rouge correspondante. Cette action supprime le fichier .lck pas le mode 'Ferme'. Qu'il faut \'f4ter en second lieu.\par
\par
\par
\b D\'e9placer\b0\par
Lorsqu'un Forum(article) est verrouill\'e9 en mode Maintenance, et que les 10 mn sont ecoul\'e9es, on peut recharger la page. Ainsi l'ic\'f4ne "navigation" de spip appara\'eet sous l'id des Sujets du Forum Ferm\'e9.\par
En cliquant sur ce bouton dans le Sujet voulu, on est renvoy\'e9 vers la page de d\'e9placement, o\'f9 l'on s\'e9lectionne le Forum(article) de destination.\par
\par
\par
\b Nouveau Forum(article)\par
\b0 Dans la page Salon, le bouton de cr\'e9ation d'un nouveau Forum renvois, dans cette version 0.1, vers la page de cr\'e9ation d'un Article.\par
\par
\par
\b R\'e9daction d'un Post/Sujet\par
\b0 Les deux boutons (sur page Forum et Page Sujet) ouvre un popup contenant le forumlaire de r\'e9daction d'un "message". Ce formulaire fonctionne comme le formulaire classique de SPIP. Auquel est ajout\'e9 la gestion des smileys. (traitement \'e0 partir d'un dossier smileys/).\par
Dans cette version le chemin du dossier est mis en dur dans la  function genere_list_smileys() !\par
\par
\par
\par
}
 